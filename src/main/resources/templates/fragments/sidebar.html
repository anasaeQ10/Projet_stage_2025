<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>
<body>
<div th:fragment="sidebar" style="
    background: linear-gradient(180deg, #2d3748 0%, #1a202c 100%);
    width: 280px;
    height: 100vh;
    position: fixed;
    left: 0;
    top: 0;
    color: white;
    display: flex;
    flex-direction: column;
    z-index: 1000;
    box-shadow: 4px 0 15px rgba(0,0,0,0.1);
">

    <!-- Header -->
    <div style="
        background: #4e73df;
        padding: 1.5rem;
        text-align: center;
        border-bottom: 1px solid rgba(255,255,255,0.1);
    ">
        <h3 style="margin: 0; font-size: 1.25rem; font-weight: 600;">Career Center</h3>
    </div>

    <!-- Navigation -->
    <div style="padding: 1.5rem; flex: 1; overflow-y: auto;">

        <!-- Section Admin -->
        <div th:if="${currentUser.role == 'ROLE_ADMIN'}" style="margin-bottom: 2rem;">
            <div style="
                color: rgba(255,255,255,0.6);
                font-size: 0.75rem;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                margin-bottom: 1rem;
                padding-left: 0.5rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            ">
                <i class="bi bi-shield-check"></i>
                ADMINISTRATION
            </div>

            <a th:href="@{/dashboard}" style="
                display: flex;
                align-items: center;
                color: white;
                text-decoration: none;
                padding: 0.75rem 1rem;
                margin: 0.25rem 0;
                border-radius: 6px;
                transition: all 0.2s ease;
                gap: 0.75rem;
            " onmouseover="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateX(5px)'" onmouseout="this.style.background=''; this.style.transform='none'">
                <i class="bi bi-people" style="width: 20px; text-align: center; font-size: 1.1rem;"></i>
                <span>Utilisateurs</span>
            </a>

            <a th:href="@{/admin/stats}" style="
                display: flex;
                align-items: center;
                color: white;
                text-decoration: none;
                padding: 0.75rem 1rem;
                margin: 0.25rem 0;
                border-radius: 6px;
                transition: all 0.2s ease;
                gap: 0.75rem;
            " onmouseover="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateX(5px)'" onmouseout="this.style.background=''; this.style.transform='none'">
                <i class="bi bi-pie-chart" style="width: 20px; text-align: center; font-size: 1.1rem;"></i>
                <span>Statistiques</span>
            </a>
        </div>

        <!-- Section Générale -->
        <div style="margin-bottom: 2rem;">
            <div style="
                color: rgba(255,255,255,0.6);
                font-size: 0.75rem;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.5px;
                margin-bottom: 1rem;
                padding-left: 0.5rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            ">
                <i class="bi bi-person-circle"></i>
                PERSONNEL
            </div>

            <a th:href="@{/user/profile}" style="
                display: flex;
                align-items: center;
                color: white;
                text-decoration: none;
                padding: 0.75rem 1rem;
                margin: 0.25rem 0;
                border-radius: 6px;
                background: #4e73df;
                box-shadow: 0 4px 8px rgba(78, 115, 223, 0.3);
                gap: 0.75rem;
            ">
                <i class="bi bi-person" style="width: 20px; text-align: center; font-size: 1.1rem;"></i>
                <span>Mon Profil</span>
            </a>

            <a th:href="@{/offres/liste}" style="
                display: flex;
                align-items: center;
                color: white;
                text-decoration: none;
                padding: 0.75rem 1rem;
                margin: 0.25rem 0;
                border-radius: 6px;
                transition: all 0.2s ease;
                gap: 0.75rem;
            " onmouseover="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateX(5px)'" onmouseout="this.style.background=''; this.style.transform='none'">
                <i class="bi bi-briefcase" style="width: 20px; text-align: center; font-size: 1.1rem;"></i>
                <span>Offres d'emploi</span>
            </a>

            <a th:href="@{/events}" style="
                display: flex;
                align-items: center;
                color: white;
                text-decoration: none;
                padding: 0.75rem 1rem;
                margin: 0.25rem 0;
                border-radius: 6px;
                transition: all 0.2s ease;
                gap: 0.75rem;
            " onmouseover="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateX(5px)'" onmouseout="this.style.background=''; this.style.transform='none'">
                <i class="bi bi-calendar-event" style="width: 20px; text-align: center; font-size: 1.1rem;"></i>
                <span>Les Événements</span>
            </a>
        </div>
    </div>

    <!-- Footer -->
    <div style="
        background: rgba(0,0,0,0.2);
        border-top: 1px solid rgba(255,255,255,0.1);
        padding: 1.5rem;
    ">
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div style="
                width: 48px;
                height: 48px;
                background: #4299e1;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: 600;
                font-size: 1.1rem;
                color: white;
                flex-shrink: 0;
            " th:text="${currentUser.nom.substring(0,1) + currentUser.prenom.substring(0,1)}">AA</div>
            <div style="flex: 1; overflow: hidden;">
                <div style="font-weight: 600; font-size: 1rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" th:text="${currentUser.nom + ' ' + currentUser.prenom}">ANAS AIT EL QADI</div>
                <div style="
                        font-size: 11px;
                        opacity: 0.8;"
                     th:text="${currentUser.role == 'ROLE_ADMIN'} ? 'Administrateur' : (${currentUser.role == 'ROLE_RH'} ? 'Ressources Humaines' : 'Utilisateur')">Administrateur</div>
            </div>
            </div>
        </div>

        <form th:action="@{/logout}" method="post">
            <button type="submit" style="
                width: 100%;
                background: rgba(229, 62, 62, 0.2);
                border: none;
                color: white;
                padding: 0.75rem;
                border-radius: 6px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
                cursor: pointer;
                transition: all 0.2s;
            " onmouseover="this.style.background='rgba(229, 62, 62, 0.3)'" onmouseout="this.style.background='rgba(229, 62, 62, 0.2)'">
                <i class="bi bi-box-arrow-right"></i>
                Déconnexion
            </button>
        </form>

        <a href="mailto:support@votreapp.com" style="
            display: block;
            text-align: center;
            font-size: 0.75rem;
            color: rgba(255,255,255,0.6);
            margin-top: 1rem;
            text-decoration: none;
            transition: color 0.2s;
        " onmouseover="this.style.color='white'" onmouseout="this.style.color='rgba(255,255,255,0.6)'">
            <i class="bi bi-envelope"></i> support@votreapp.com
        </a>
    </div>
</div>
</body>
</html>
